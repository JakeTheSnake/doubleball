debugCounter = 0;

window.onload = function () {
    GameCreator.bgCanvas = document.createElement("canvas");
    GameCreator.bgCanvas.id = "bg-canvas"
    GameCreator.bgContext = GameCreator.bgCanvas.getContext("2d");
    GameCreator.bgCanvas.width = GameCreator.width;
    GameCreator.bgCanvas.height = GameCreator.height;
    $("#canvas-container").append(GameCreator.bgCanvas);

    GameCreator.mainCanvas = document.createElement("canvas");
    GameCreator.mainCanvas.id = "main-canvas"
    GameCreator.mainContext = GameCreator.mainCanvas.getContext("2d");
    GameCreator.mainCanvas.width = GameCreator.width;
    GameCreator.mainCanvas.height = GameCreator.height;
    $("#canvas-container").append(GameCreator.mainCanvas);
   
    var borderKeys = Object.keys(GameCreator.borderObjects);

    for (var i = 0; i < borderKeys.length; i += 1 ) {
        var borderObj = GameCreator.borderObjects[borderKeys[i]];
        borderObj.getDefaultState = function() {
            return {attributes: this.attributes};
        };
        borderObj.states = [];
        GameCreator.commonObjectFunctions.createState.call(borderObj, 'default', {});
    }
    GameCreator.state = 'playing';
    GameCreator.restoreState('{"globalObjects":{"free_route_ball":{"attributes":{"unique":false},"id":1,"objectName":"free_route_ball","objectType":"RouteObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/red_ball.gif","width":[50],"height":[50],"speed":300}}]},"free_ball":{"attributes":{"unique":false},"id":2,"objectName":"free_ball","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/ball.png","width":[70],"height":[70],"accX":0,"accY":0,"speedX":0,"speedY":0}}]},"free_bar":{"attributes":{"unique":false},"id":3,"objectName":"free_bar","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/bar1.png","width":[388],"height":[388],"accX":0,"accY":0,"speedX":0,"speedY":0}}]},"mouse_zealot":{"attributes":{"unique":false},"id":4,"objectName":"mouse_zealot","objectType":"MouseObject","onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"onKeySets":{"space":[],"leftMouse":[],"rightMouse":[]},"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/zealot.gif","width":[80],"height":[80],"maxX":1024,"maxY":768,"minX":0,"minY":0}}]},"platform_zealot":{"attributes":{"unique":false},"id":5,"objectName":"platform_zealot","objectType":"PlatformObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"onKeySets":{"space":[],"leftMouse":[],"rightMouse":[]},"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/zealot.gif","width":[80],"height":[80],"accY":[5],"acceleration":[8],"maxSpeed":[300]}}]},"topdown_zerg":{"attributes":{"unique":false},"id":6,"objectName":"topdown_zerg","objectType":"TopDownObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"onKeySets":{"space":[],"leftMouse":[],"rightMouse":[]},"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/zergling.png","width":[80],"height":[80],"maxSpeed":300}}]},"textCounter":{"id":7,"objectName":"textCounter","objectType":"CounterObjectText","states":[{"name":"Default","id":0,"attributes":{"width":[100],"height":[50],"font":"Arial","color":"#000","size":20,"image":"file:///D:/Jonatan/doubleball/assets/textcounter.png"}}]},"imageCounter":{"id":8,"objectName":"imageCounter","objectType":"CounterObjectImage","states":[{"name":"Default","id":0,"attributes":{"image":"file:///D:/Jonatan/doubleball/assets/black_ball.gif","width":[100],"height":[100]}}]},"Apache":{"attributes":{"unique":false},"id":9,"objectName":"Apache","objectType":"MouseObject","onCollideSets":[],"onCreateSets":[{"conditions":[],"actions":[{"name":"Create","parameters":{"objectToCreate":"13","x":[1100],"y":[0,500]},"timing":{"type":"every","time":1500}},{"name":"Create","parameters":{"objectToCreate":"11","x":[1024],"y":[718]},"timing":{"type":"now"}},{"name":"Create","parameters":{"objectToCreate":"11","x":[1024],"y":[718]},"timing":{"type":"every","time":6700}}]}],"onDestroySets":[],"onKeySets":{"space":[],"leftMouse":[{"conditions":[],"actions":[{"name":"Shoot","parameters":{"objectToShoot":"16","projectileSpeed":1000,"projectileDirection":"Right","target":"this"},"timing":{"type":"now"}}]}],"rightMouse":[]},"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://www.clker.com/cliparts/e/1/2/b/13929295581119844938apache2-md.png","width":[60],"height":[40],"maxX":1024,"maxY":500,"minX":0,"minY":0}}]},"Buggy":{"attributes":{"unique":false},"id":10,"objectName":"Buggy","objectType":"PlatformObject","onClickSets":[],"onCollideSets":[{"id":11,"caSets":[{"conditions":[],"actions":[]}]},{"id":12,"caSets":[{"conditions":[],"actions":[{"name":"Stop","parameters":{},"timing":{"type":"now"}}]}]},{"id":-1,"caSets":[{"conditions":[],"actions":[{"name":"Stop","parameters":{},"timing":{"type":"now"}}]}]},{"id":-2,"caSets":[{"conditions":[],"actions":[{"name":"Stop","parameters":{},"timing":{"type":"now"}}]}]}],"onCreateSets":[{"conditions":[],"actions":[{"name":"Create","parameters":{"objectToCreate":"14","x":[1100],"y":[0,500]},"timing":{"type":"every","time":3000}},{"name":"Create","parameters":{"objectToCreate":"15","x":[1100],"y":[668]},"timing":{"type":"every","time":9000}}]}],"onDestroySets":[],"onKeySets":{"space":[{"conditions":[],"actions":[{"name":"Shoot","parameters":{"objectToShoot":"16","projectileSpeed":1000,"projectileDirection":"Right","target":"this"},"timing":{"type":"now"}}]}],"leftMouse":[],"rightMouse":[]},"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://i.imgur.com/eXDm7L5.png","width":[90],"height":[45],"accY":[20],"acceleration":[8],"maxSpeed":[300]}}]},"Ground":{"attributes":{"unique":false},"id":11,"objectName":"Ground","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://flatreview.com/images/ground.png","width":[1024],"height":[50],"accX":0,"accY":0,"speedX":[-150],"speedY":0}}]},"invisible ground":{"attributes":{"unique":false},"id":12,"objectName":"invisible ground","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://static.squarespace.com/static/513b7d89e4b0abff73ba616f/513b7e88e4b0b4b41fc89710/514f5d28e4b045db941970c7/1364155689311/space.png","width":[1100],"height":[50],"accX":0,"accY":0,"speedX":[-150],"speedY":0}}]},"Cloud":{"attributes":{"unique":false},"id":13,"objectName":"Cloud","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://pngimg.com/upload/cloud_PNG2.png","width":[100,200],"height":[50,100],"accX":0,"accY":0,"speedX":[-50,-300],"speedY":0}}]},"Messerschmidt":{"attributes":{"unique":false},"id":14,"objectName":"Messerschmidt","objectType":"FreeObject","onClickSets":[],"onCollideSets":[{"id":18,"caSets":[{"conditions":[],"actions":[{"name":"Shoot","parameters":{"objectToShoot":"17","projectileSpeed":500,"projectileDirection":"Left","target":"Apache1"},"timing":{"type":"now"}}]}]},{"id":16,"caSets":[{"conditions":[],"actions":[{"name":"SwitchState","parameters":{"objectState":"2"},"timing":{"type":"now"}},{"name":"SwitchState","parameters":{"objectState":"1"},"timing":{"type":"after","time":750}},{"name":"Destroy","parameters":{"effect":"FadeOut"},"timing":{"type":"after","time":800}}]}]}],"onCreateSets":[{"conditions":[],"actions":[]}],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://i.imgur.com/usb8J1A.png","width":[110],"height":[40],"accX":0,"accY":0,"speedX":[-200],"speedY":0}},{"name":"Exploding","id":1,"attributes":{"image":"http://flashvhtml.com/html/img/action/explosion/Explosion_Sequence_A%208.png","width":[100],"height":[100],"accY":[3],"accX":[1]}},{"name":"Falling","id":2,"attributes":{"accY":[3],"accX":[1]}}]},"Panzer":{"attributes":{"unique":false},"id":15,"objectName":"Panzer","objectType":"FreeObject","onClickSets":[],"onCollideSets":[{"id":16,"caSets":[{"conditions":[],"actions":[{"name":"Destroy","parameters":{"effect":"FadeOut"},"timing":{"type":"now"}}]}]}],"onCreateSets":[],"onDestroySets":[{"conditions":[],"actions":[]}],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://www.tanks-encyclopedia.com/ww2/nazi_germany/panzer_IV_Ausf-J_early.png","width":[100],"height":[50],"accX":0,"accY":0,"speedX":[-100],"speedY":0}},{"name":"Fire1","id":1,"attributes":{"height":[100],"speedX":[0],"image":"http://i.imgur.com/MQPVf9Y.png"}},{"name":"Fire2","id":2,"attributes":{"height":[100],"speedX":[0],"image":"http://i.imgur.com/PRAyodB.png"}},{"name":"Explosion","id":3,"attributes":{"image":"http://fc04.deviantart.net/fs51/f/2009/273/4/3/Nuclear_Explosion_2_by_Qsec.png","speedX":[0],"height":[100]}}]},"Bullet":{"attributes":{"unique":false},"id":16,"objectName":"Bullet","objectType":"FreeObject","onClickSets":[],"onCollideSets":[{"id":15,"caSets":[{"conditions":[],"actions":[{"name":"Destroy","parameters":{"effect":null},"timing":{"type":"now"}}]}]},{"id":14,"caSets":[{"conditions":[],"actions":[{"name":"Destroy","parameters":{"effect":null},"timing":{"type":"now"}}]}]},{"id":-2,"caSets":[{"conditions":[],"actions":[{"name":"Destroy","parameters":{"effect":null},"timing":{"type":"now"}}]},{"conditions":[],"actions":[]}]}],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://i.imgur.com/gO95VH4.png","width":[5],"height":[5],"accX":0,"accY":0,"speedX":0,"speedY":0}}]},"Enemy Bullet":{"attributes":{"unique":false},"id":17,"objectName":"Enemy Bullet","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://i.imgur.com/gO95VH4.png","width":[5],"height":[5],"accX":0,"accY":0,"speedX":0,"speedY":0}}]},"Shoot Trigger":{"attributes":{"unique":false},"id":18,"objectName":"Shoot Trigger","objectType":"FreeObject","onClickSets":[],"onCollideSets":[],"onCreateSets":[],"onDestroySets":[],"parentCounters":{},"states":[{"name":"Default","id":0,"attributes":{"image":"http://static.squarespace.com/static/513b7d89e4b0abff73ba616f/513b7e88e4b0b4b41fc89710/514f5d28e4b045db941970c7/1364155689311/space.png","width":[50],"height":[300],"accX":0,"accY":0,"speedX":0,"speedY":0}}]}},"scenes":[{"objects":[{"attributes":{"x":56,"y":60,"accX":0,"accY":0,"speedX":0,"speedY":0,"width":[90],"height":[60],"instanceId":"Apache1","maxX":1024,"maxY":500,"minX":0,"minY":0},"parent":"Apache"},{"attributes":{"x":8,"y":670,"accX":[0],"accY":[20],"speedX":[0],"speedY":[0],"width":[90],"height":[48.5],"instanceId":"Buggy2","acceleration":[8],"maxSpeed":[300]},"parent":"Buggy"},{"attributes":{"x":0,"y":718,"accX":0,"accY":0,"speedX":[-150],"speedY":0,"width":[1024],"height":[50],"instanceId":"Ground3"},"parent":"Ground"},{"attributes":{"x":-38,"y":721,"accX":0,"accY":0,"speedX":[0],"speedY":0,"width":[1100],"height":[31],"instanceId":"invisible ground4"},"parent":"invisible ground"},{"attributes":{"x":717,"y":1,"accX":0,"accY":0,"speedX":0,"speedY":0,"width":[50],"height":[300],"instanceId":"Shoot Trigger759"},"parent":"Shoot Trigger"},{"attributes":{"x":559,"y":225,"accX":0,"accY":0,"speedX":0,"speedY":0,"width":[50],"height":[300],"instanceId":"Shoot Trigger760"},"parent":"Shoot Trigger"},{"attributes":{"x":247,"y":21,"accX":0,"accY":0,"speedX":0,"speedY":0,"width":[50],"height":[300],"instanceId":"Shoot Trigger761"},"parent":"Shoot Trigger"}],"id":1,"attributes":{"name":"Scene 1","bgColor":"white","bgImage":"http://fc09.deviantart.net/fs44/f/2009/098/a/9/Clear_Sky_by_lfcjake.png"}}],"idCounter":1555,"globalIdCounter":18,"uniqueSceneId":1}')
    GameCreator.playScene(GameCreator.scenes[0]);
    
}
    
